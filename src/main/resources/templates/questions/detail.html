<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title th:text="${question.title} + ' - A vs B'">ì§ˆë¬¸ ìƒì„¸</title>
	<style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        .container { max-width: 900px; margin: 0 auto; }
        .header, .voting-section, .stats-section { background: white; border-radius: 20px; padding: 40px; margin-bottom: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
        h1 { color: #333; margin-bottom: 20px; font-size: 2em; }
        .back-link { display: inline-block; color: #667eea; text-decoration: none; margin-bottom: 15px; font-weight: 600; }
        .back-link:hover { text-decoration: underline; }
        .voting-title { text-align: center; color: #333; font-size: 1.3em; margin-bottom: 30px; font-weight: 600; }
        .options-container { display: grid; grid-template-columns: 1fr auto 1fr; gap: 20px; align-items: center; margin-bottom: 40px; }
        .option-card { background: #f8f9fa; border-radius: 15px; padding: 20px; text-align: center; cursor: pointer; border: 3px solid transparent; transition: all 0.3s; }
        .option-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(102,126,234,0.3); border-color: #667eea; }
        .option-image { width: 100%; height: 200px; object-fit: cover; border-radius: 10px; margin-bottom: 15px; }
        .option-label { font-size: 0.9em; color: #999; margin-bottom: 10px; font-weight: 600; }
        .option-text { font-size: 1.5em; color: #333; font-weight: 700; margin-bottom: 15px; }
        .vote-btn { width: 100%; padding: 12px; border: none; border-radius: 10px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .vote-btn:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(102,126,234,0.4); }
        .vs-text { font-size: 2em; font-weight: bold; color: #667eea; text-align: center; }
        .vote-form input[type="radio"] { display: none; }
        .vote-form input[type="radio"]:checked + .option-card { border-color: #667eea; box-shadow: 0 10px 30px rgba(102,126,234,0.3); }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #333; font-weight: 600; }
        .form-group textarea { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 10px; font-family: inherit; font-size: 1em; resize: vertical; min-height: 100px; }
        .form-group textarea:focus { outline: none; border-color: #667eea; }
        .stats-title { color: #333; font-size: 1.3em; margin-bottom: 25px; font-weight: 600; }
        .progress-bar-container { background: #e0e0e0; border-radius: 10px; height: 30px; overflow: hidden; display: flex; margin-bottom: 30px; }
        .progress-bar-a { background: linear-gradient(90deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 0.9em; transition: width 0.5s; }
        .progress-bar-b { background: linear-gradient(90deg, #f093fb 0%, #f5576c 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 0.9em; transition: width 0.5s; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        .stat-card { background: #f8f9fa; border-radius: 12px; padding: 25px; text-align: center; }
        .stat-label { font-size: 0.9em; color: #666; margin-bottom: 10px; }
        .stat-value { font-size: 2.5em; font-weight: bold; color: #667eea; }
        .stat-percentage { font-size: 1.2em; color: #999; margin-top: 5px; }
        .answers-section { margin-top: 30px; }
        .answer-item { background: #f8f9fa; border-radius: 10px; padding: 20px; margin-bottom: 15px; border-left: 4px solid #667eea; }
        .answer-header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        .answer-badge { padding: 4px 12px; border-radius: 20px; font-size: 0.85em; font-weight: 600; color: white; }
        .badge-a { background: #667eea; }
        .badge-b { background: #f5576c; }
        .answer-content { color: #333; line-height: 1.6; }
        .no-answers { text-align: center; color: #999; padding: 40px; font-style: italic; }
	</style>
</head>

<body>
	<div class="container">
		<!-- Header -->
		<div class="header">
			<a th:href="@{/questions}" class="back-link">â† ì§ˆë¬¸ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
			<h1 th:text="${question.title}">ì§ˆë¬¸ ì œëª©</h1>
		</div>

		<!-- Voting -->
		<div class="voting-section">
			<h2 class="voting-title">ì–´ë–¤ ê²ƒì„ ì„ íƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h2>

			<form th:action="@{/questions/{id}/answers(id=${question.id})}" method="post" class="vote-form">
				<div class="options-container">
					<!-- Option A -->
					<input type="radio" id="choiceA" name="answerText" value="A" required>
					<label for="choiceA" class="option-card">
						<img th:if="${question.imageA != null}" th:src="@{${question.imageA}}" alt="Option A Image" class="option-image"/>
						<div class="option-label">ì„ íƒì§€ A</div>
						<div class="option-text" th:text="${question.optionA}">ì˜µì…˜ A</div>
					</label>

					<!-- VS -->
					<div class="vs-text">VS</div>

					<!-- Option B -->
					<input type="radio" id="choiceB" name="answerText" value="B" required>
					<label for="choiceB" class="option-card">
						<img th:if="${question.imageB != null}" th:src="@{${question.imageB}}" alt="Option B Image" class="option-image"/>
						<div class="option-label">ì„ íƒì§€ B</div>
						<div class="option-text" th:text="${question.optionB}">ì˜µì…˜ B</div>
					</label>
				</div>

				<div class="form-group">
					<label for="content">ì„ íƒ ì´ìœ  (ì„ íƒì‚¬í•­):</label>
					<textarea id="content" name="content" placeholder="ì™œ ì´ ì„ íƒì„ í•˜ì…¨ë‚˜ìš”? (ìµœëŒ€ 500ì)" maxlength="500"></textarea>
				</div>

				<button type="submit" class="vote-btn">íˆ¬í‘œí•˜ê¸°</button>
			</form>
		</div>

		<!-- Statistics Section -->
		<div class="stats-section" th:if="${answers != null and !answers.isEmpty()}">
			<h2 class="stats-title">ğŸ“Š íˆ¬í‘œ ê²°ê³¼</h2>

			<div class="progress-bar-container">
				<div class="progress-bar-a" th:style="'width:' + ${percentageA} + '%'" th:if="${totalVotes > 0}"></div>
				<div class="progress-bar-b" th:style="'width:' + ${percentageB} + '%'" th:if="${totalVotes > 0}"></div>
			</div>

			<div class="stats-grid">
				<div class="stat-card">
					<div class="stat-label" th:text="${question.optionA}">ì˜µì…˜ A</div>
					<div class="stat-value" th:text="${countA}">0</div>
					<div class="stat-percentage" th:text="${percentageA} + '%'">0%</div>
				</div>
				<div class="stat-card">
					<div class="stat-label" th:text="${question.optionB}">ì˜µì…˜ B</div>
					<div class="stat-value" th:text="${countB}">0</div>
					<div class="stat-percentage" th:text="${percentageB} + '%'">0%</div>
				</div>
			</div>

			<div class="answers-section">
				<h3 class="stats-title">ğŸ’¬ íˆ¬í‘œ ì´ìœ </h3>
				<div th:each="answer : ${answers}" class="answer-item">
					<div class="answer-header">
                        <span class="answer-badge" th:classappend="${answer.answerText == 'A'} ? 'badge-a' : 'badge-b'"
                              th:text="${answer.answerText == 'A'} ? ${question.optionA} : ${question.optionB}">ì„ íƒ</span>
					</div>
					<div class="answer-content" th:if="${!#strings.isEmpty(answer.content)}" th:text="${answer.content}"></div>
					<div class="answer-content" th:if="${#strings.isEmpty(answer.content)}" style="color:#999; font-style:italic;">ì„ íƒ ì´ìœ ë¥¼ ì…ë ¥í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</div>
				</div>
			</div>
		</div>

		<div class="stats-section" th:if="${answers == null or answers.isEmpty()}">
			<div class="no-answers">ì•„ì§ íˆ¬í‘œê°€ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ íˆ¬í‘œìê°€ ë˜ì–´ë³´ì„¸ìš”! ğŸ‰</div>
		</div>
	</div>
</body>

</html>
